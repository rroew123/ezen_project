<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.kr.ezen_project.dao.SangMemDAO"> 
	
	<select id="getSangMemAll" resultType="SangMemVO">	
		select * from SangMem
	</select>
	
	<select id="getSangMem" resultType="SangMemVO">	
		select * from SangMem where orderNum = #{orderNum}
	</select>
	
	<insert id="addSangMem" parameterType="SangMemVO">
		insert into SangMem (orderNum, memId, payNum, sangSize, sangColor, sangCode, sangCnt, ordDate, ordStat) values(#{orderNum}, #{memId}, #{payNum}, #{sangSize}, #{sangColor}, #{sangCode}, #{sangCnt}, sysdate, #{ordStat} )
	</insert>
	
	<delete id="delSangMem" parameterType="SangMemVO">
		delete from SangMem where orderNum = #{orderNum}
	</delete>
	
	<delete id="delSangMemAll">
		delete from SangMem
	</delete>
	
	<update id="updSangMem" parameterType="SangMemVO">
		update SangMem set memId = #{memId}, payNum = #{payNum}, sangSize = #{sangSize}, sangColor = #{sangColor}, sangCode = #{sangCode}, sangCnt = #{sangCnt}, ordDate = sysdate, ordStat = #{ordStat} where orderNum = #{orderNum}
	</update>
	
	<select id="getCouponAll" resultType="CouponVO">	
		select * from Coupon
	</select>
	
	<select id="getCoupon" resultType="CouponVO" >
		select * from Coupon where coupNum = #{coupNum}
	</select>
	
	<select id="getCoupMemId" resultType="CouponVO" >
		select * from Coupon where memId = #{memId}
	</select>
	
	<select id="getCoupWorkCond" resultType="CouponVO" >
		select * from Coupon where workCond = #{workCond}
	</select>
	
	<insert id="addCoupon" parameterType="CouponVO">
		insert into Coupon (coupNum, memId, coupName, coupType, expirDate, workCond, discount) values ( #{coupNum}, #{memId}, #{coupName}, #{coupType}, #{expirDate}, #{workCond}, #{discount})
	</insert>
	
	<delete id="delCoupon" parameterType="CouponVO">
		delete from Coupon where coupNum = #{coupNum}
	</delete>
	
	<delete id="delCouponAll">
		delete from Coupon
	</delete>
	
	<update id="updCoupon" parameterType="CouponVO" >
		update Coupon set memId = #{memId}, coupName = #{coupName}, coupType = #{coupType}, expirDate = #{expirDate}, workCond = #{workCond}, discount = #{discount} where coupNum = #{coupNum}
	</update>
	
	
	
	<select id="getReviewAll" resultType="ReviewVO">	
		select * from Review
	</select>
	
	<select id="getReviewON" resultType="ReviewVO">
		select * from Review where orderNum = #{orderNum}
	</select>
	
	<select id="getReviewSC" resultType="ReviewVO" parameterType="String">	
		select RV.orderNum, RV.indiRat, RV.revCntxt from SangMem SM right OUTER JOIN Review RV ON SM.orderNum = RV.orderNum
    	where SM.sangCode = #{sangCode}
	</select>
	
	<select id="getReviewMI" resultType="ReviewVO" parameterType="String">
		select * from SangMem SM right OUTER JOIN Review RV ON SM.orderNum = RV.orderNum
    	where SM.memId = #{memId}
	</select>
	
	<insert id="addReview" parameterType="ReviewVO">
		insert into Review (orderNum, indiRat, revCntxt) values (#{orderNum}, #{indiRat}, #{revCntxt})
	</insert>
	
	<delete id="delReview" parameterType="ReviewVO">
		delete from Review where orderNum = #{orderNum}
	</delete>
	
	<delete id="delReviewAll">
		delete from Review
	</delete>
	
	<update id="updReview" parameterType="ReviewVO">
		update Review set  indiRat = #{indiRat}, revCntxt = #{revCntxt} where orderNum = #{orderNum}
	</update>
	
	
</mapper>